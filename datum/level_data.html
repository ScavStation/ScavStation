<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/level_data - Space Station 13 - ScavStation</title></head><body><header><a href="index.html">Space Station 13 - ScavStation</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> â€” <a href="datum/level_data.html#var">Var Details</a> - <a href="datum/level_data.html#proc">Proc Details</a></header><main><h1>level_data <aside>/<a href="datum.html">datum</a>/<a href="datum/level_data.html">level_data</a></aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L66"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 66"></a></h1><p>Keeps details on how to generate, maintain and access a zlevel.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/level_data.html#var/_has_warned_uninitialized_strata">_has_warned_uninitialized_strata</a></th><td>This is set to prevent spamming the log when a turf has tried to grab our strata before we've been initialized</td></tr><tr><th><a href="datum/level_data.html#var/_level_setup_completed">_level_setup_completed</a></th><td>Whether the level data was setup already.</td></tr><tr><th><a href="datum/level_data.html#var/ambient_light_color">ambient_light_color</a></th><td>Colour of ambient light for turfs on this level.</td></tr><tr><th><a href="datum/level_data.html#var/ambient_light_level">ambient_light_level</a></th><td>Ambient lighting light intensity turfs on this level should have. Value from 0 to 1.</td></tr><tr><th><a href="datum/level_data.html#var/base_area">base_area</a></th><td>The default area type for the whole level. It will be applied to all turfs in the level on creation, unless loaded by map.</td></tr><tr><th><a href="datum/level_data.html#var/base_turf">base_turf</a></th><td>The default base turf type for the whole level. It will be the base turf type for the z level, unless loaded by map.
filler_turf overrides what turfs the level will be created with.</td></tr><tr><th><a href="datum/level_data.html#var/border_filler">border_filler</a></th><td>The turf to fill the border area beyond the bounds of the level with.
If null, nothing will be placed in the border area. (This is also placed when a border cannot be looped if loop_unconnected_borders is TRUE)</td></tr><tr><th><a href="datum/level_data.html#var/cached_connections">cached_connections</a></th><td>A cached list of connected directions to their connected level id. Filled up at runtime.</td></tr><tr><th><a href="datum/level_data.html#var/connected_levels">connected_levels</a></th><td>A associative list of all level_ids to a direction bitflag. Indicates what direction of the map connects to what level</td></tr><tr><th><a href="datum/level_data.html#var/daycycle_id">daycycle_id</a></th><td>If not null, this level will register with a daycycle id/type on New().</td></tr><tr><th><a href="datum/level_data.html#var/daycycle_type">daycycle_type</a></th><td>Type provided to the above.</td></tr><tr><th><a href="datum/level_data.html#var/exterior_atmos_temp">exterior_atmos_temp</a></th><td>Temperature of standard exterior atmosphere.</td></tr><tr><th><a href="datum/level_data.html#var/exterior_atmosphere">exterior_atmosphere</a></th><td>Gas mixture datum returned to exterior return_air. Set to assoc list of material to moles to initialize the gas datum.</td></tr><tr><th><a href="datum/level_data.html#var/fall_depth">fall_depth</a></th><td>Multiplier applied to damage when falling through this level.</td></tr><tr><th><a href="datum/level_data.html#var/filler_turf">filler_turf</a></th><td>When the level is created dynamically, all turfs on the map will be changed to this one type. If null, will use the base_turf instead.</td></tr><tr><th><a href="datum/level_data.html#var/forbid_strata">forbid_strata</a></th><td>Strata types to forbid from generating on this level.</td></tr><tr><th><a href="datum/level_data.html#var/level_flags">level_flags</a></th><td>Various flags indicating what this level functions as.</td></tr><tr><th><a href="datum/level_data.html#var/level_generators">level_generators</a></th><td>A list of /datum/random_map types to apply to this level if we're running level generation.
May run before or after parent level gen</td></tr><tr><th><a href="datum/level_data.html#var/level_id">level_id</a></th><td>A unique string identifier for this particular z-level. Used to fetch a level without knowing its z-level.</td></tr><tr><th><a href="datum/level_data.html#var/level_inner_height">level_inner_height</a></th><td>Filled by map gen on init. Indicates the height of the accessible area within the transition edges.</td></tr><tr><th><a href="datum/level_data.html#var/level_inner_max_x">level_inner_max_x</a></th><td>Filled by map gen on init. Indicates where the accessible level area starts past the transition edge.</td></tr><tr><th><a href="datum/level_data.html#var/level_inner_max_y">level_inner_max_y</a></th><td>Filled by map gen on init. Indicates where the accessible level area starts past the transition edge.</td></tr><tr><th><a href="datum/level_data.html#var/level_inner_min_x">level_inner_min_x</a></th><td>Filled by map gen on init. Indicates where the accessible level area starts past the transition edge.</td></tr><tr><th><a href="datum/level_data.html#var/level_inner_min_y">level_inner_min_y</a></th><td>Filled by map gen on init. Indicates where the accessible level area starts past the transition edge.</td></tr><tr><th><a href="datum/level_data.html#var/level_inner_width">level_inner_width</a></th><td>Filled by map gen on init. Indicates the width of the accessible area within the transition edges.</td></tr><tr><th><a href="datum/level_data.html#var/level_max_height">level_max_height</a></th><td>The desired height of the level, including the TRANSITIONEDGE.
If world.maxy is bigger, the exceeding area will be filled with turfs of &quot;border_filler&quot; type if defined, or base_turf otherwise.</td></tr><tr><th><a href="datum/level_data.html#var/level_max_width">level_max_width</a></th><td>The desired width of the level, including the TRANSITIONEDGE.
If world.maxx is bigger, the exceeding area will be filled with turfs of &quot;border_filler&quot; type if defined, or base_turf otherwise.</td></tr><tr><th><a href="datum/level_data.html#var/level_z">level_z</a></th><td>The z-level that was assigned to this level_data</td></tr><tr><th><a href="datum/level_data.html#var/loop_turf_type">loop_turf_type</a></th><td>If set we will put a looping edge on every unconnected edge of the map. If null, will not loop unconnected edges.
If an unconnected edge is facing a connected edge, it will be instead filled with &quot;border_filler&quot; instead, if defined.</td></tr><tr><th><a href="datum/level_data.html#var/name">name</a></th><td>Name displayed to the player to refer to this level in user interfaces and etc. If null, one will be generated.</td></tr><tr><th><a href="datum/level_data.html#var/origin_is_world_center">origin_is_world_center</a></th><td>Determines if edge turfs should be centered on the map dimensions.</td></tr><tr><th><a href="datum/level_data.html#var/strata">strata</a></th><td>The mineral strata assigned to this level if any. Set to a path at definition, then to a decl/strata instance at runtime.</td></tr><tr><th><a href="datum/level_data.html#var/strata_base_material">strata_base_material</a></th><td>The base material randomly chosen from the strata for this level.</td></tr><tr><th><a href="datum/level_data.html#var/template_edge_padding">template_edge_padding</a></th><td>Extra spacing needed between any random level templates and the transition edge of a level.
Note that this is more or less unnecessary if you are using a mapped area that doesn't stretch to the edge of the level.</td></tr><tr><th><a href="datum/level_data.html#var/transition_turf_type">transition_turf_type</a></th><td>The turf type to use for zlevel lateral connections</td></tr><tr><th><a href="datum/level_data.html#var/use_global_exterior_ambience">use_global_exterior_ambience</a></th><td>Set to false to override with our own.</td></tr><tr><th><a href="datum/level_data.html#var/z_volume_level_x">z_volume_level_x</a></th><td>Used to apply x offsets to distance checking in this volume.</td></tr><tr><th><a href="datum/level_data.html#var/z_volume_level_y">z_volume_level_y</a></th><td>Used to apply y offsets to distance checking in this volume.</td></tr><tr><th><a href="datum/level_data.html#var/z_volume_level_z">z_volume_level_z</a></th><td>Used to apply z offsets to distance checking in this volume.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/level_data.html#proc/adapt_location_name">adapt_location_name</a></th><td>Changes anything named we may need to rename accordingly to the parent location name. For instance, exoplanets levels.</td></tr><tr><th><a href="datum/level_data.html#proc/after_generate_level">after_generate_level</a></th><td>Called during level setup. Run anything that should happen only after the map is fully generated.</td></tr><tr><th><a href="datum/level_data.html#proc/after_template_load">after_template_load</a></th><td>Called after a map_template has been loaded on our z-level. Only apply to templates loaded onto new z-levels.</td></tr><tr><th><a href="datum/level_data.html#proc/apply_map_generators">apply_map_generators</a></th><td>Apply the parent entity's map generators. (Planets generally)
This proc is to give a chance to level_data subtypes to individually chose to ignore the parent generators.</td></tr><tr><th><a href="datum/level_data.html#proc/before_template_generation">before_template_generation</a></th><td>Called before a runtime generated template is generated on our z-level. Only applies to templates generated onto new z-levels.
Is never called by templates which are loaded from file!</td></tr><tr><th><a href="datum/level_data.html#proc/build_border">build_border</a></th><td>Builds the map's transition edge if applicable</td></tr><tr><th><a href="datum/level_data.html#proc/build_border_corners">build_border_corners</a></th><td>Handle preparing the level's border's corners after we've stup the edges.</td></tr><tr><th><a href="datum/level_data.html#proc/build_border_edge">build_border_edge</a></th><td>Apply the specified edge type to the specified edge's turfs</td></tr><tr><th><a href="datum/level_data.html#proc/compute_level_edges_states">compute_level_edges_states</a></th><td>Loop through the edges of the level and determine if they're connected, looping, filled, or untouched.</td></tr><tr><th><a href="datum/level_data.html#proc/copy_from">copy_from</a></th><td>Handle copying data from a previous level_data we're replacing.</td></tr><tr><th><a href="datum/level_data.html#proc/generate_level">generate_level</a></th><td>Called when setting up the level. Apply generators and anything that modifies the turfs of the level.</td></tr><tr><th><a href="datum/level_data.html#proc/get_all_connected_level_data">get_all_connected_level_data</a></th><td>Returns recursively a list of level_data for each connected levels.</td></tr><tr><th><a href="datum/level_data.html#proc/get_all_connected_level_ids">get_all_connected_level_ids</a></th><td>Returns recursively a list of level_ids for each connected levels.</td></tr><tr><th><a href="datum/level_data.html#proc/get_all_connected_level_z">get_all_connected_level_z</a></th><td>Returns recursively a list of z-level indices for each connected levels. Parameter is to keep trakc</td></tr><tr><th><a href="datum/level_data.html#proc/get_base_area_instance">get_base_area_instance</a></th><td>Returns the instance of the base area for this level</td></tr><tr><th><a href="datum/level_data.html#proc/get_subtemplate_blacklist">get_subtemplate_blacklist</a></th><td>Helper proc for subtemplate generation. Returns a bitflag of template flags that must not be present for a subtemplate to be considered available.</td></tr><tr><th><a href="datum/level_data.html#proc/get_subtemplate_budget">get_subtemplate_budget</a></th><td>Helper proc for subtemplate generation. Returns a point budget to spend on subtemplates.</td></tr><tr><th><a href="datum/level_data.html#proc/get_subtemplate_category">get_subtemplate_category</a></th><td>Helper proc for subtemplate generation. Returns a string identifier for a general category of template.</td></tr><tr><th><a href="datum/level_data.html#proc/get_subtemplate_whitelist">get_subtemplate_whitelist</a></th><td>Helper proc for subtemplate generation. Returns a bitflag of template flags that must be present for a subtemplate to be considered available.</td></tr><tr><th><a href="datum/level_data.html#proc/initialize_level_id">initialize_level_id</a></th><td>Generates a level_id if none were specified in the datum definition.</td></tr><tr><th><a href="datum/level_data.html#proc/initialize_new_level">initialize_new_level</a></th><td>Initialize the turfs on the z-level.</td></tr><tr><th><a href="datum/level_data.html#proc/load_subtemplate">load_subtemplate</a></th><td>Actually handles loading a template template at the given turf.</td></tr><tr><th><a href="datum/level_data.html#proc/replace_with">replace_with</a></th><td>Handle a new level_data datum overwriting us.</td></tr><tr><th><a href="datum/level_data.html#proc/setup_ambient">setup_ambient</a></th><td>Setup ambient lighting for the level</td></tr><tr><th><a href="datum/level_data.html#proc/setup_exterior_atmosphere">setup_exterior_atmosphere</a></th><td>Setup/generate atmosphere for exterior turfs on the level.</td></tr><tr><th><a href="datum/level_data.html#proc/setup_level_bounds">setup_level_bounds</a></th><td>Calculate the bounds of the level, the border area, and the inner accessible area.
Basically, by default levels are assumed to be loaded relative to the world center, so if they're smaller than the world
they get their origin offset so they're in the middle of the world. By default templates are always loaded at origin 1,1.
so that's useful to know and have control over!</td></tr><tr><th><a href="datum/level_data.html#proc/setup_level_data">setup_level_data</a></th><td>Prepare level for being used. Setup borders, lateral z connections, ambient lighting, atmosphere, etc..</td></tr><tr><th><a href="datum/level_data.html#proc/setup_strata">setup_strata</a></th><td>Pick a strata for the given level if applicable.</td></tr><tr><th><a href="datum/level_data.html#proc/spawn_subtemplates">spawn_subtemplates</a></th><td>Try to allocate the given amount of POIs onto our level. Returns the template types that were spawned</td></tr><tr><th><a href="datum/level_data.html#proc/try_place_subtemplate">try_place_subtemplate</a></th><td>Attempts several times to find turfs where a subtemplate can be placed.</td></tr><tr><th><a href="datum/level_data.html#proc/warn_bad_strata">warn_bad_strata</a></th><td>Warns exactly once about a turf trying to initialize it's strata from us when we haven't completed setup.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/_has_warned_uninitialized_strata"><aside class="declaration">var </aside>_has_warned_uninitialized_strata <aside>â€“ /tmp</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L159"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 159"></a></h3><p>This is set to prevent spamming the log when a turf has tried to grab our strata before we've been initialized</p><h3 id="var/_level_setup_completed"><aside class="declaration">var </aside>_level_setup_completed <aside>â€“ /tmp</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L157"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 157"></a></h3><p>Whether the level data was setup already.</p><h3 id="var/ambient_light_color"><aside class="declaration">var </aside>ambient_light_color <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L113"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 113"></a></h3><p>Colour of ambient light for turfs on this level.</p><h3 id="var/ambient_light_level"><aside class="declaration">var </aside>ambient_light_level <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L111"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 111"></a></h3><p>Ambient lighting light intensity turfs on this level should have. Value from 0 to 1.</p><h3 id="var/base_area"><aside class="declaration">var </aside>base_area <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L130"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 130"></a></h3><p>The default area type for the whole level. It will be applied to all turfs in the level on creation, unless loaded by map.</p><h3 id="var/base_turf"><aside class="declaration">var </aside>base_turf <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L126"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 126"></a></h3><p>The default base turf type for the whole level. It will be the base turf type for the z level, unless loaded by map.
filler_turf overrides what turfs the level will be created with.</p><h3 id="var/border_filler"><aside class="declaration">var </aside>border_filler <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L133"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 133"></a></h3><p>The turf to fill the border area beyond the bounds of the level with.
If null, nothing will be placed in the border area. (This is also placed when a border cannot be looped if loop_unconnected_borders is TRUE)</p><h3 id="var/cached_connections"><aside class="declaration">var </aside>cached_connections <aside>â€“ /tmp/list</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L150"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 150"></a></h3><p>A cached list of connected directions to their connected level id. Filled up at runtime.</p><h3 id="var/connected_levels"><aside class="declaration">var </aside>connected_levels <aside>â€“ /list</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L148"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 148"></a></h3><p>A associative list of all level_ids to a direction bitflag. Indicates what direction of the map connects to what level</p><h3 id="var/daycycle_id"><aside class="declaration">var </aside>daycycle_id <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L165"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 165"></a></h3><p>If not null, this level will register with a daycycle id/type on New().</p><h3 id="var/daycycle_type"><aside class="declaration">var </aside>daycycle_type <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L167"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 167"></a></h3><p>Type provided to the above.</p><h3 id="var/exterior_atmos_temp"><aside class="declaration">var </aside>exterior_atmos_temp <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L142"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 142"></a></h3><p>Temperature of standard exterior atmosphere.</p><h3 id="var/exterior_atmosphere"><aside class="declaration">var </aside>exterior_atmosphere <aside>â€“ /<a href="datum.html">datum</a>/<a href="datum/gas_mixture.html">gas_mixture</a></aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L144"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 144"></a></h3><p>Gas mixture datum returned to exterior return_air. Set to assoc list of material to moles to initialize the gas datum.</p><h3 id="var/fall_depth"><aside class="declaration">var </aside>fall_depth <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L70"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 70"></a></h3><p>Multiplier applied to damage when falling through this level.</p><h3 id="var/filler_turf"><aside class="declaration">var </aside>filler_turf <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L128"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 128"></a></h3><p>When the level is created dynamically, all turfs on the map will be changed to this one type. If null, will use the base_turf instead.</p><h3 id="var/forbid_strata"><aside class="declaration">var </aside>forbid_strata <aside>â€“ /list</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L121"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 121"></a></h3><p>Strata types to forbid from generating on this level.</p><h3 id="var/level_flags"><aside class="declaration">var </aside>level_flags <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L76"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 76"></a></h3><p>Various flags indicating what this level functions as.</p><h3 id="var/level_generators"><aside class="declaration">var </aside>level_generators <aside>â€“ /list</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L154"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 154"></a></h3><p>A list of /datum/random_map types to apply to this level if we're running level generation.
May run before or after parent level gen</p><h3 id="var/level_id"><aside class="declaration">var </aside>level_id <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L74"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 74"></a></h3><p>A unique string identifier for this particular z-level. Used to fetch a level without knowing its z-level.</p><h3 id="var/level_inner_height"><aside class="declaration">var </aside>level_inner_height <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L105"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 105"></a></h3><p>Filled by map gen on init. Indicates the height of the accessible area within the transition edges.</p><h3 id="var/level_inner_max_x"><aside class="declaration">var </aside>level_inner_max_x <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L98"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 98"></a></h3><p>Filled by map gen on init. Indicates where the accessible level area starts past the transition edge.</p><h3 id="var/level_inner_max_y"><aside class="declaration">var </aside>level_inner_max_y <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L100"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 100"></a></h3><p>Filled by map gen on init. Indicates where the accessible level area starts past the transition edge.</p><h3 id="var/level_inner_min_x"><aside class="declaration">var </aside>level_inner_min_x <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L94"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 94"></a></h3><p>Filled by map gen on init. Indicates where the accessible level area starts past the transition edge.</p><h3 id="var/level_inner_min_y"><aside class="declaration">var </aside>level_inner_min_y <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L96"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 96"></a></h3><p>Filled by map gen on init. Indicates where the accessible level area starts past the transition edge.</p><h3 id="var/level_inner_width"><aside class="declaration">var </aside>level_inner_width <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L103"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 103"></a></h3><p>Filled by map gen on init. Indicates the width of the accessible area within the transition edges.</p><h3 id="var/level_max_height"><aside class="declaration">var </aside>level_max_height <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L82"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 82"></a></h3><p>The desired height of the level, including the TRANSITIONEDGE.
If world.maxy is bigger, the exceeding area will be filled with turfs of &quot;border_filler&quot; type if defined, or base_turf otherwise.</p><h3 id="var/level_max_width"><aside class="declaration">var </aside>level_max_width <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L79"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 79"></a></h3><p>The desired width of the level, including the TRANSITIONEDGE.
If world.maxx is bigger, the exceeding area will be filled with turfs of &quot;border_filler&quot; type if defined, or base_turf otherwise.</p><h3 id="var/level_z"><aside class="declaration">var </aside>level_z <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L72"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 72"></a></h3><p>The z-level that was assigned to this level_data</p><h3 id="var/loop_turf_type"><aside class="declaration">var </aside>loop_turf_type <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L136"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 136"></a></h3><p>If set we will put a looping edge on every unconnected edge of the map. If null, will not loop unconnected edges.
If an unconnected edge is facing a connected edge, it will be instead filled with &quot;border_filler&quot; instead, if defined.</p><h3 id="var/name"><aside class="declaration">var </aside>name <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L68"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 68"></a></h3><p>Name displayed to the player to refer to this level in user interfaces and etc. If null, one will be generated.</p><h3 id="var/origin_is_world_center"><aside class="declaration">var </aside>origin_is_world_center <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L163"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 163"></a></h3><p>Determines if edge turfs should be centered on the map dimensions.</p><h3 id="var/strata"><aside class="declaration">var </aside>strata <aside>â€“ /decl/strata</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L117"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 117"></a></h3><p>The mineral strata assigned to this level if any. Set to a path at definition, then to a decl/strata instance at runtime.</p><h3 id="var/strata_base_material"><aside class="declaration">var </aside>strata_base_material <aside>â€“ /<a href="decl/material.html">decl/material</a></aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L119"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 119"></a></h3><p>The base material randomly chosen from the strata for this level.</p><h3 id="var/template_edge_padding"><aside class="declaration">var </aside>template_edge_padding <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L171"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 171"></a></h3><p>Extra spacing needed between any random level templates and the transition edge of a level.
Note that this is more or less unnecessary if you are using a mapped area that doesn't stretch to the edge of the level.</p><h3 id="var/transition_turf_type"><aside class="declaration">var </aside>transition_turf_type <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L138"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 138"></a></h3><p>The turf type to use for zlevel lateral connections</p><h3 id="var/use_global_exterior_ambience"><aside class="declaration">var </aside>use_global_exterior_ambience <aside>â€“ </aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L109"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 109"></a></h3><p>Set to false to override with our own.</p><h3 id="var/z_volume_level_x"><aside class="declaration">var </aside>z_volume_level_x <aside>â€“ /tmp</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L87"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 87"></a></h3><p>Used to apply x offsets to distance checking in this volume.</p><h3 id="var/z_volume_level_y"><aside class="declaration">var </aside>z_volume_level_y <aside>â€“ /tmp</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L89"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 89"></a></h3><p>Used to apply y offsets to distance checking in this volume.</p><h3 id="var/z_volume_level_z"><aside class="declaration">var </aside>z_volume_level_z <aside>â€“ /tmp</aside> <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L91"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 91"></a></h3><p>Used to apply z offsets to distance checking in this volume.</p><h2 id="proc">Proc Details</h2><h3 id="proc/adapt_location_name"><aside class="declaration">proc </aside>adapt_location_name<aside>(location_name)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L471"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 471"></a></aside></h3><p>Changes anything named we may need to rename accordingly to the parent location name. For instance, exoplanets levels.</p><h3 id="proc/after_generate_level"><aside class="declaration">proc </aside>after_generate_level<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L465"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 465"></a></aside></h3><p>Called during level setup. Run anything that should happen only after the map is fully generated.</p><h3 id="proc/after_template_load"><aside class="declaration">proc </aside>after_template_load<aside>(/<a href="datum.html">datum</a>/<a href="datum/map_template.html">map_template</a>/template)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L484"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 484"></a></aside></h3><p>Called after a map_template has been loaded on our z-level. Only apply to templates loaded onto new z-levels.</p><h3 id="proc/apply_map_generators"><aside class="declaration">proc </aside>apply_map_generators<aside>(/list/map_gen)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L454"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 454"></a></aside></h3><p>Apply the parent entity's map generators. (Planets generally)
This proc is to give a chance to level_data subtypes to individually chose to ignore the parent generators.</p><h3 id="proc/before_template_generation"><aside class="declaration">proc </aside>before_template_generation<aside>(/<a href="datum.html">datum</a>/<a href="datum/map_template.html">map_template</a>/template)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L480"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 480"></a></aside></h3><p>Called before a runtime generated template is generated on our z-level. Only applies to templates generated onto new z-levels.
Is never called by templates which are loaded from file!</p><h3 id="proc/build_border"><aside class="declaration">proc </aside>build_border<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L490"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 490"></a></aside></h3><p>Builds the map's transition edge if applicable</p><h3 id="proc/build_border_corners"><aside class="declaration">proc </aside>build_border_corners<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L547"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 547"></a></aside></h3><p>Handle preparing the level's border's corners after we've stup the edges.</p><h3 id="proc/build_border_edge"><aside class="declaration">proc </aside>build_border_edge<aside>(edge_type, edge_dir)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L527"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 527"></a></aside></h3><p>Apply the specified edge type to the specified edge's turfs</p><h3 id="proc/compute_level_edges_states"><aside class="declaration">proc </aside>compute_level_edges_states<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L499"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 499"></a></aside></h3><p>Loop through the edges of the level and determine if they're connected, looping, filled, or untouched.</p><h3 id="proc/copy_from"><aside class="declaration">proc </aside>copy_from<aside>(/<a href="datum.html">datum</a>/<a href="datum/level_data.html">level_data</a>/old_level)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L206"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 206"></a></aside></h3><p>Handle copying data from a previous level_data we're replacing.</p><h3 id="proc/generate_level"><aside class="declaration">proc </aside>generate_level<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L433"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 433"></a></aside></h3><p>Called when setting up the level. Apply generators and anything that modifies the turfs of the level.</p><h3 id="proc/get_all_connected_level_data"><aside class="declaration">proc </aside>get_all_connected_level_data<aside>(/list/_connected_siblings)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L594"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 594"></a></aside></h3><p>Returns recursively a list of level_data for each connected levels.</p><h3 id="proc/get_all_connected_level_ids"><aside class="declaration">proc </aside>get_all_connected_level_ids<aside>(/list/_connected_siblings)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L608"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 608"></a></aside></h3><p>Returns recursively a list of level_ids for each connected levels.</p><h3 id="proc/get_all_connected_level_z"><aside class="declaration">proc </aside>get_all_connected_level_z<aside>(/list/_connected_siblings)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L622"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 622"></a></aside></h3><p>Returns recursively a list of z-level indices for each connected levels. Parameter is to keep trakc</p><h3 id="proc/get_base_area_instance"><aside class="declaration">proc </aside>get_base_area_instance<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L646"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 646"></a></aside></h3><p>Returns the instance of the base area for this level</p><h3 id="proc/get_subtemplate_blacklist"><aside class="declaration">proc </aside>get_subtemplate_blacklist<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L426"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 426"></a></aside></h3><p>Helper proc for subtemplate generation. Returns a bitflag of template flags that must not be present for a subtemplate to be considered available.</p><h3 id="proc/get_subtemplate_budget"><aside class="declaration">proc </aside>get_subtemplate_budget<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L420"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 420"></a></aside></h3><p>Helper proc for subtemplate generation. Returns a point budget to spend on subtemplates.</p><h3 id="proc/get_subtemplate_category"><aside class="declaration">proc </aside>get_subtemplate_category<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L423"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 423"></a></aside></h3><p>Helper proc for subtemplate generation. Returns a string identifier for a general category of template.</p><h3 id="proc/get_subtemplate_whitelist"><aside class="declaration">proc </aside>get_subtemplate_whitelist<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L429"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 429"></a></aside></h3><p>Helper proc for subtemplate generation. Returns a bitflag of template flags that must be present for a subtemplate to be considered available.</p><h3 id="proc/initialize_level_id"><aside class="declaration">proc </aside>initialize_level_id<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L196"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 196"></a></aside></h3><p>Generates a level_id if none were specified in the datum definition.</p><h3 id="proc/initialize_new_level"><aside class="declaration">proc </aside>initialize_new_level<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L211"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 211"></a></aside></h3><p>Initialize the turfs on the z-level.</p><h3 id="proc/load_subtemplate"><aside class="declaration">proc </aside>load_subtemplate<aside>(/<a href="turf.html">turf</a>/central_turf, /<a href="datum.html">datum</a>/<a href="datum/map_template.html">map_template</a>/template)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L832"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 832"></a></aside></h3><p>Actually handles loading a template template at the given turf.</p><h3 id="proc/replace_with"><aside class="declaration">proc </aside>replace_with<aside>(/<a href="datum.html">datum</a>/<a href="datum/level_data.html">level_data</a>/new_level)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L202"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 202"></a></aside></h3><p>Handle a new level_data datum overwriting us.</p><h3 id="proc/setup_ambient"><aside class="declaration">proc </aside>setup_ambient<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L370"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 370"></a></aside></h3><p>Setup ambient lighting for the level</p><h3 id="proc/setup_exterior_atmosphere"><aside class="declaration">proc </aside>setup_exterior_atmosphere<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L377"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 377"></a></aside></h3><p>Setup/generate atmosphere for exterior turfs on the level.</p><h3 id="proc/setup_level_bounds"><aside class="declaration">proc </aside>setup_level_bounds<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L347"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 347"></a></aside></h3><p>Calculate the bounds of the level, the border area, and the inner accessible area.
Basically, by default levels are assumed to be loaded relative to the world center, so if they're smaller than the world
they get their origin offset so they're in the middle of the world. By default templates are always loaded at origin 1,1.
so that's useful to know and have control over!</p><h3 id="proc/setup_level_data"><aside class="declaration">proc </aside>setup_level_data<aside>(skip_gen)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L226"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 226"></a></aside></h3><p>Prepare level for being used. Setup borders, lateral z connections, ambient lighting, atmosphere, etc..</p><h3 id="proc/setup_strata"><aside class="declaration">proc </aside>setup_strata<aside>()  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L393"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 393"></a></aside></h3><p>Pick a strata for the given level if applicable.</p><h3 id="proc/spawn_subtemplates"><aside class="declaration">proc </aside>spawn_subtemplates<aside>(budget, template_category, blacklist, whitelist)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L749"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 749"></a></aside></h3><p>Try to allocate the given amount of POIs onto our level. Returns the template types that were spawned</p><h3 id="proc/try_place_subtemplate"><aside class="declaration">proc </aside>try_place_subtemplate<aside>(/<a href="datum.html">datum</a>/<a href="datum/map_template.html">map_template</a>/template, /list/area_whitelist)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L797"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 797"></a></aside></h3><p>Attempts several times to find turfs where a subtemplate can be placed.</p><h3 id="proc/warn_bad_strata"><aside class="declaration">proc </aside>warn_bad_strata<aside>(/<a href="turf.html">turf</a>/T)  <a href="https://github.com/ScavStation/ScavStation/blob/6ff2d116e5258c43693a7dd5a7c293a23627aba9/code/modules/multiz/level_data.dm#L655"><img src="git.png" width="16" height="16" title="code/modules/multiz/level_data.dm 655"></a></aside></h3><p>Warns exactly once about a turf trying to initialize it's strata from us when we haven't completed setup.</p></main><footer>scavstation.dme <a href="https://github.com/ScavStation/ScavStation/tree/6ff2d116e5258c43693a7dd5a7c293a23627aba9">6ff2d11</a> (dev) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>